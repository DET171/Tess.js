<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><!-- Adding meta --><!-- Adding external script--><!-- Adding external style--><!-- Adding scripts--><!-- Adding style--><!-- Adding overlay script--><!-- Adding overlay style--><title>array/collection.js</title><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><link type="text/css" rel="stylesheet" href="styles/third-party/ionicons.min.css"><link type="text/css" rel="stylesheet" href="styles/third-party/prettify-tomorrow.css"><link type="text/css" rel="stylesheet" href="styles/reset.css"><link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-base.css"><link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-light.css"><svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none"><defs><symbol id="copy-icon" viewbox="0 0 488.3 488.3"><g><path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"/><path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z"/></g></symbol><symbol id="search-icon" viewBox="0 0 512 512"><g><g><path d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z"/></g></g><g><g><path d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z"/></g></g></symbol><symbol id="down-icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></symbol></defs></svg></head><body><nav class="navbar" id="navbar"><div class="navbar-heading" id="navbar-heading"><a href="index.html"><h2 class="navbar-heading-text">Home</h2></a></div><div class="search-box" id="search-box"><div class="search-box-input-container"><input class="search-box-input" type="text" placeholder="Search..." id="search-box-input"><svg class="search-icon" alt="search-icon"><use xlink:href="#search-icon"></use></svg></div><div class="search-item-container" id="search-item-container"><ul class="search-item-ul" id="search-item-ul"></ul></div></div><div class="sidebar-main-content" id="sidebar-main-content"><div class="accordion collapsed" id="34101"><h3 class="accordion-heading">Classes<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion collapsed child" id="4590840"><div class="accordion-heading child"><a href="Calculator.html">Calculator</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class="methods accordion-content"><li data-type="method"><a href="Calculator.html#calculate">calculate</a></li></ul></li><li class="accordion collapsed child" id="962809"><div class="accordion-heading child"><a href="Collection.html">Collection</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class="methods accordion-content"><li data-type="method"><a href="Collection.html#add">add</a></li><li data-type="method"><a href="Collection.html#every">every</a></li><li data-type="method"><a href="Collection.html#filter">filter</a></li><li data-type="method"><a href="Collection.html#find">find</a></li><li data-type="method"><a href="Collection.html#map">map</a></li><li data-type="method"><a href="Collection.html#random">random</a></li><li data-type="method"><a href="Collection.html#reduce">reduce</a></li><li data-type="method"><a href="Collection.html#remove">remove</a></li><li data-type="method"><a href="Collection.html#some">some</a></li><li data-type="method"><a href="Collection.html#update">update</a></li></ul></li><li class="accordion collapsed child" id="395237"><div class="accordion-heading child"><a href="StrictArray.html">StrictArray</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class="methods accordion-content"><li data-type="method"><a href="StrictArray.html#push">push</a></li><li data-type="method"><a href="StrictArray.html#unshift">unshift</a></li></ul></li></ul></div><div class="accordion collapsed" id="4121399"><h3 class="accordion-heading">Global<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion-list" id=""><a href="global.html#afterEl">afterEl</a></li><li class="accordion-list" id=""><a href="global.html#afterPos">afterPos</a></li><li class="accordion-list" id=""><a href="global.html#arrayify">arrayify</a></li><li class="accordion-list" id=""><a href="global.html#assert">assert</a></li><li class="accordion-list" id=""><a href="global.html#atob">atob</a></li><li class="accordion-list" id=""><a href="global.html#beforeEl">beforeEl</a></li><li class="accordion-list" id=""><a href="global.html#beforePos">beforePos</a></li><li class="accordion-list" id=""><a href="global.html#btoa">btoa</a></li><li class="accordion-list" id=""><a href="global.html#camelCase">camelCase</a></li><li class="accordion-list" id=""><a href="global.html#compact">compact</a></li><li class="accordion-list" id=""><a href="global.html#diff">diff</a></li><li class="accordion-list" id=""><a href="global.html#ellipsis">ellipsis</a></li><li class="accordion-list" id=""><a href="global.html#flatten">flatten</a></li><li class="accordion-list" id=""><a href="global.html#isNil">isNil</a></li><li class="accordion-list" id=""><a href="global.html#isString">isString</a></li><li class="accordion-list" id=""><a href="global.html#m">m</a></li><li class="accordion collapsed child" id="7614787"><div class="accordion-heading child"><a href="global.html#markr">markr</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class="methods accordion-content"><li data-type="method"><a href="global.html#markr#.error">error</a></li><li data-type="method"><a href="global.html#markr#.info">info</a></li><li data-type="method"><a href="global.html#markr#.success">success</a></li><li data-type="method"><a href="global.html#markr#.warn">warn</a></li></ul></li><li class="accordion-list" id=""><a href="global.html#pascalCase">pascalCase</a></li><li class="accordion-list" id=""><a href="global.html#pickRan">pickRan</a></li><li class="accordion-list" id=""><a href="global.html#progressBar">progressBar</a></li><li class="accordion-list" id=""><a href="global.html#ranBool">ranBool</a></li><li class="accordion-list" id=""><a href="global.html#ranFloat">ranFloat</a></li><li class="accordion-list" id=""><a href="global.html#ranInt">ranInt</a></li><li class="accordion-list" id=""><a href="global.html#ranKey">ranKey</a></li><li class="accordion-list" id=""><a href="global.html#reverse">reverse</a></li><li class="accordion-list" id=""><a href="global.html#rmFalsey">rmFalsey</a></li><li class="accordion-list" id=""><a href="global.html#shuffle">shuffle</a></li><li class="accordion-list" id=""><a href="global.html#sparseEach">sparseEach</a></li><li class="accordion collapsed child" id="933973"><div class="accordion-heading child"><a href="global.html#spinner">spinner</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class="methods accordion-content"><li data-type="method"><a href="global.html#spinner#.start">start</a></li><li data-type="method"><a href="global.html#spinner#.stop">stop</a></li></ul></li><li class="accordion-list" id=""><a href="global.html#stdDev">stdDev</a></li><li class="accordion-list" id=""><a href="global.html#uniq">uniq</a></li><li class="accordion-list" id=""><a href="global.html#wait">wait</a></li></ul></div></div></nav><div class="navbar-ham" id="navbar-ham"><div><div class="first"></div><div class="second"></div><div class="third"></div></div></div><div id="main" class="main-content"><h1 id="page-title" class="page-title">array/collection.js</h1><section><article><pre class="prettyprint source linenums"><code>/**
* The collection class, ported from [Eris](https://abal.moe/Eris)
* &lt;br>
* Hold a bunch of values
* @since v2.5.2-beta.1
* @extends Map
* @prop {Class} baseObject - The base class for all items
* @prop {Number?} limit - Max number of items to hold
*/
class Collection extends Map {
	/**
    * Construct a Collection
    * @arg {Class} baseObject - The base class for all items
    * @arg {Number} [limit] - Max number of items to hold
    */
	constructor(baseObject, limit) {
		super();
		this.baseObject = baseObject;
		this.limit = limit;
	}

	/**
    * Update an object
    * @arg {Object} obj - The updated object data
    * @arg {String} obj.id - The ID of the object
    * @arg {Class} [extra] - An extra parameter the constructor may need
    * @arg {Boolean} [replace] - Whether to replace an existing object with the same ID
    * @returns {Class} The updated object
    */
	update(obj, extra, replace) {
		if(!obj.id &amp;&amp; obj.id !== 0) {
			throw new Error('Missing object id');
		}
		const item = this.get(obj.id);
		if(!item) {
			return this.add(obj, extra, replace);
		}
		item.update(obj, extra);
		return item;
	}

	/**
    * Add an object
    * @arg {Object} obj - The object data
    * @arg {String} obj.id - The ID of the object
    * @arg {Class} [extra] - An extra parameter the constructor may need
    * @arg {Boolean} [replace] - Whether to replace an existing object with the same ID
    * @returns {Class} The existing or newly created object
    */
	add(obj, extra, replace) {
		if(this.limit === 0) {
			return (obj instanceof this.baseObject || obj.constructor.name === this.baseObject.name) ? obj : new this.baseObject(obj, extra);
		}
		if(obj.id == null) {
			throw new Error('Missing object id');
		}
		const existing = this.get(obj.id);
		if(existing &amp;&amp; !replace) {
			return existing;
		}
		if(!(obj instanceof this.baseObject || obj.constructor.name === this.baseObject.name)) {
			obj = new this.baseObject(obj, extra);
		}

		this.set(obj.id, obj);

		if(this.limit &amp;&amp; this.size > this.limit) {
			const iter = this.keys();
			while(this.size > this.limit) {
				this.delete(iter.next().value);
			}
		}
		return obj;
	}

	/**
     * Returns true if all elements satisfy the condition
     * @arg {Function} func - A function that takes an object and returns true or false
     * @returns {Boolean} Whether or not all elements satisfied the condition
     */
	every(func) {
		for(const item of this.values()) {
			if(!func(item)) {
				return false;
			}
		}
		return true;
	}

	/**
    * Return all the objects that make the function evaluate true
    * @arg {Function} func - A function that takes an object and returns true if it matches
    * @returns {Array&lt;Class>} An array containing all the objects that matched
    */
	filter(func) {
		const arr = [];
		for(const item of this.values()) {
			if(func(item)) {
				arr.push(item);
			}
		}
		return arr;
	}

	/**
    * Return the first object to make the function evaluate true
    * @arg {Function} func - A function that takes an object and returns true if it matches
    * @returns {Class?} The first matching object, or undefined if no match
    */
	find(func) {
		for(const item of this.values()) {
			if(func(item)) {
				return item;
			}
		}
		return undefined;
	}

	/**
    * Return an array with the results of applying the given function to each element
    * @arg {Function} func - A function that takes an object and returns something
    * @returns {Array} An array containing the results
    */
	map(func) {
		const arr = [];
		for(const item of this.values()) {
			arr.push(func(item));
		}
		return arr;
	}

	/**
    * Get a random object from the Collection
    * @returns {Class?} The random object, or undefined if there is no match
    */
	random() {
		const index = Math.floor(Math.random() * this.size);
		const iter = this.values();
		for(let i = 0; i &lt; index; ++i) {
			iter.next();
		}
		return iter.next().value;
	}

	/**
     * Returns a value resulting from applying a function to every element of the collection
     * @arg {Function} func - A function that takes the previous value and the next item and returns a new value
     * @arg {any} [initialValue] - The initial value passed to the function
     * @returns {any} The final result
     */
	reduce(func, initialValue) {
		const iter = this.values();
		let val;
		let result = initialValue === undefined ? iter.next().value : initialValue;
		while((val = iter.next().value) !== undefined) {
			result = func(result, val);
		}
		return result;
	}

	/**
    * Remove an object
    * @arg {Object} obj - The object
    * @arg {String} obj.id - The ID of the object
    * @returns {Class?} The removed object, or null if nothing was removed
    */
	remove(obj) {
		const item = this.get(obj.id);
		if(!item) {
			return null;
		}
		this.delete(obj.id);
		return item;
	}

	/**
     * Returns true if at least one element satisfies the condition
     * @arg {Function} func - A function that takes an object and returns true or false
     * @returns {Boolean} Whether or not at least one element satisfied the condition
     */
	some(func) {
		for(const item of this.values()) {
			if(func(item)) {
				return true;
			}
		}
		return false;
	}

	toString() {
		return `[Collection&lt;${this.baseObject.name}>]`;
	}

	toJSON() {
		const json = {};
		for(const item of this.values()) {
			json[item.id] = item;
		}
		return json;
	}
}

export { Collection };
</code></pre></article></section></div><footer class="footer" id="footer"></footer><script src="scripts/third-party/prettify.js"></script><script src="scripts/third-party/lang-css.js"></script><script type="text/javascript" src="scripts/misc.js"></script><script>prettyPrint();</script><script src="scripts/linenumber.js"></script><script src="scripts/fix-code-block.js"></script><script src="scripts/fix-navbar.js"></script><script src="scripts/search.js"></script><script src="scripts/third-party/fuse.js"></script><script>var list = [{"title":"Calculator","link":"<a href=\"Calculator.html\">Calculator</a>"},{"title":"Calculator#calculate","link":"<a href=\"Calculator.html#calculate\">Calculator &rtrif; calculate</a>"},{"title":"Collection","link":"<a href=\"Collection.html\">Collection</a>"},{"title":"Collection#add","link":"<a href=\"Collection.html#add\">Collection &rtrif; add</a>"},{"title":"Collection#every","link":"<a href=\"Collection.html#every\">Collection &rtrif; every</a>"},{"title":"Collection#filter","link":"<a href=\"Collection.html#filter\">Collection &rtrif; filter</a>"},{"title":"Collection#find","link":"<a href=\"Collection.html#find\">Collection &rtrif; find</a>"},{"title":"Collection#map","link":"<a href=\"Collection.html#map\">Collection &rtrif; map</a>"},{"title":"Collection#random","link":"<a href=\"Collection.html#random\">Collection &rtrif; random</a>"},{"title":"Collection#reduce","link":"<a href=\"Collection.html#reduce\">Collection &rtrif; reduce</a>"},{"title":"Collection#remove","link":"<a href=\"Collection.html#remove\">Collection &rtrif; remove</a>"},{"title":"Collection#some","link":"<a href=\"Collection.html#some\">Collection &rtrif; some</a>"},{"title":"Collection#update","link":"<a href=\"Collection.html#update\">Collection &rtrif; update</a>"},{"title":"StrictArray","link":"<a href=\"StrictArray.html\">StrictArray</a>"},{"title":"StrictArray#push","link":"<a href=\"StrictArray.html#push\">StrictArray &rtrif; push</a>"},{"title":"StrictArray#unshift","link":"<a href=\"StrictArray.html#unshift\">StrictArray &rtrif; unshift</a>"},{"title":"afterEl","link":"<a href=\"global.html#afterEl\">afterEl</a>"},{"title":"afterPos","link":"<a href=\"global.html#afterPos\">afterPos</a>"},{"title":"arrayify","link":"<a href=\"global.html#arrayify\">arrayify</a>"},{"title":"assert","link":"<a href=\"global.html#assert\">assert</a>"},{"title":"atob","link":"<a href=\"global.html#atob\">atob</a>"},{"title":"beforeEl","link":"<a href=\"global.html#beforeEl\">beforeEl</a>"},{"title":"beforePos","link":"<a href=\"global.html#beforePos\">beforePos</a>"},{"title":"btoa","link":"<a href=\"global.html#btoa\">btoa</a>"},{"title":"camelCase","link":"<a href=\"global.html#camelCase\">camelCase</a>"},{"title":"compact","link":"<a href=\"global.html#compact\">compact</a>"},{"title":"diff","link":"<a href=\"global.html#diff\">diff</a>"},{"title":"ellipsis","link":"<a href=\"global.html#ellipsis\">ellipsis</a>"},{"title":"flatten","link":"<a href=\"global.html#flatten\">flatten</a>"},{"title":"isNil","link":"<a href=\"global.html#isNil\">isNil</a>"},{"title":"isString","link":"<a href=\"global.html#isString\">isString</a>"},{"title":"m","link":"<a href=\"global.html#m\">m</a>"},{"title":"markr","link":"<a href=\"global.html#markr\">markr</a>"},{"title":"markr.error","link":"<a href=\"global.html#markr#.error\">markr.error &rtrif; undefined</a>"},{"title":"markr.info","link":"<a href=\"global.html#markr#.info\">markr.info &rtrif; undefined</a>"},{"title":"markr.success","link":"<a href=\"global.html#markr#.success\">markr.success &rtrif; undefined</a>"},{"title":"markr.warn","link":"<a href=\"global.html#markr#.warn\">markr.warn &rtrif; undefined</a>"},{"title":"pascalCase","link":"<a href=\"global.html#pascalCase\">pascalCase</a>"},{"title":"pickRan","link":"<a href=\"global.html#pickRan\">pickRan</a>"},{"title":"progressBar","link":"<a href=\"global.html#progressBar\">progressBar</a>"},{"title":"ranBool","link":"<a href=\"global.html#ranBool\">ranBool</a>"},{"title":"ranFloat","link":"<a href=\"global.html#ranFloat\">ranFloat</a>"},{"title":"ranInt","link":"<a href=\"global.html#ranInt\">ranInt</a>"},{"title":"ranKey","link":"<a href=\"global.html#ranKey\">ranKey</a>"},{"title":"reverse","link":"<a href=\"global.html#reverse\">reverse</a>"},{"title":"rmFalsey","link":"<a href=\"global.html#rmFalsey\">rmFalsey</a>"},{"title":"shuffle","link":"<a href=\"global.html#shuffle\">shuffle</a>"},{"title":"sparseEach","link":"<a href=\"global.html#sparseEach\">sparseEach</a>"},{"title":"spinner","link":"<a href=\"global.html#spinner\">spinner</a>"},{"title":"spinner.start","link":"<a href=\"global.html#spinner#.start\">spinner.start &rtrif; undefined</a>"},{"title":"spinner.stop","link":"<a href=\"global.html#spinner#.stop\">spinner.stop &rtrif; undefined</a>"},{"title":"stdDev","link":"<a href=\"global.html#stdDev\">stdDev</a>"},{"title":"uniq","link":"<a href=\"global.html#uniq\">uniq</a>"},{"title":"wait","link":"<a href=\"global.html#wait\">wait</a>"}];
        var options = 
          setupSearch(list, options)</script></body></html>